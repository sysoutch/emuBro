<!DOCTYPE html>
<html lang="en" data-glass-effect="enabled">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="app.title">emuBro</title>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <!-- circle with transparent logo on top -->
                <div class="logo-circle"></div>
                <img src="./logo.png" alt="emuBro Logo">
                <h1><span class="logo-text-prefix">EMU</span><span class="logo-text-suffix">BRO</span></h1>
            </div>
            <nav class="navigation">
                <ul>
                    <li><a href="#" class="active">Library</a></li>
                    <li><a href="#">Tools</a></li>
                    <li><a href="#">Community</a></li>
                    <li><a href="#">Profile</a></li>
                </ul>
            </nav>
            <div class="user-actions">
                <div class="search-bar">
                    <input type="text" placeholder="Search games..." data-i18n-placeholder="filters.search">
                </div>
                <div class="form-group language-selector-wrapper">
                    <div class="form-group dropdown-with-button-wrapper">
                        <div id="language-dropdown" class="custom-select" title="Select Language">
                            <div class="selected-option">
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <span id="current-flag" class="fi"></span>
                                    <span id="current-language-name">Select Language</span>
                                </div>
                            </div>
                            <ul id="language-options" class="options-list">
                                <!-- populated dynamically -->
                            </ul>
                        </div>
                        
                        <button id="language-manager-btn" class="theme-manager-btn" title="Manage Languages">üåê</button>
                    </div>
                </div>
                <div class="theme-toggle-wrapper">
                    <div class="form-group dropdown-with-button-wrapper">
                        <select id="theme-select">
                            <option value="dark" data-i18n="theme.darkTheme">Dark Theme</option>
                            <option value="light" data-i18n="theme.lightTheme">Light Theme</option>
                        </select>
                        <button id="theme-manager-btn" class="theme-manager-btn" title="Manage Themes">‚öôÔ∏è</button>
                    </div>
                    <button id="theme-toggle-btn" class="theme-toggle" title="Toggle Light/Dark Mode">üí°</button>
                    <button id="invert-colors-btn" class="theme-toggle" title="Invert Colors">üåó</button>
                </div>
                <div class="user-info">
                    <img id="user-avatar" src="" alt="User Avatar">
                    <span id="user-name" data-i18n="messages.loadingUserInfo">Loading...</span>
                </div>
            </div>
        </header>

        <!-- View Toggle Controls -->
        <div class="view-controls">
            <button class="view-btn active" data-view="cover" data-i18n="views.cover">Cover</button>
            <button class="view-btn" data-view="list" data-i18n="views.list">List</button>
            <button class="view-btn" data-view="table" data-i18n="views.table">Table</button>
            <button class="view-btn" data-view="slideshow" data-i18n="views.slideshow">Slideshow</button>
            <button class="view-btn" data-view="random" data-i18n="views.random">Random</button>
            
            <select id="drive-selector" class="drive-selector">
                <option value="">Select Drive</option>
            </select>
            <button id="search-games-btn" class="view-btn">Search Games</button>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="drop-zone-overlay">
                <div>
                    <div class="drop-zone-overlay-text" data-i18n="dropZone.text">üìÅ Drop Folder or üìÑ Drop File</div>
                </div>
            </div>
            <!-- Sidebar -->
            <aside class="sidebar">
                <div class="sidebar-section">
                    <h3>Library</h3>
                    <ul>
                        <li class="active"><a href="#" data-view="all">All Games</a></li>
                        <li><a href="#" data-view="installed">Installed</a></li>
                        <li><a href="#" data-view="recent">Recently Played</a></li>
                        <li><a href="#" data-view="wishlist">Wishlist</a></li>
                        <li><a href="#" data-view="downloads">Downloads</a></li>
                    </ul>
                </div>
                <div class="sidebar-section">
                    <h3>Categories</h3>
                    <ul id="categories-list">
                        <li><a href="#" data-genre="all">All</a></li>
                        <li><a href="#" data-genre="Platformer">Platformer</a></li>
                        <li><a href="#" data-genre="Adventure">Adventure</a></li>
                        <li><a href="#" data-genre="RPG">RPG</a></li>
                        <li><a href="#" data-genre="Action">Action</a></li>
                        <li><a href="#" data-genre="Puzzle">Puzzle</a></li>
                        <li><a href="#" data-genre="Fighting">Fighting</a></li>
                    </ul>
                </div>
                <div class="sidebar-section">
                    <h3>Stats</h3>
                    <div class="stats">
                        <p>Total Games: <span id="total-games">0</span></p>
                        <p>Total Emulators: <span id="total-emulators">0</span></p>
                        <p>Play Time: <span id="play-time">0</span> hours</p>
                    </div>
                </div>
                <div class="sidebar-section">
                    <h3>Tools</h3>
                    <ul id="tools-list">
                        <li><a href="#" data-tool="memory-card" class="active">Memory Card Reader</a></li>
                        <li><a href="#" data-tool="rom-ripper">ROM Ripper</a></li>
                        <li><a href="#" data-tool="game-database">Game Database</a></li>
                        <li><a href="#" data-tool="cheat-codes">Cheat Codes</a></li>
                    </ul>
                </div>
            </aside>

            <!-- Game Content Wrapper -->
            <div class="game-content-wrapper">
                <!-- Game Grid -->
                <main class="game-grid">
                    <div class="game-header">
                        <h2 id="games-header">Featured Games</h2>
                        <div class="filters">
                            <select id="platform-filter">
                                <option value="all">All Platforms</option>
                                <option value="gameboy">Gameboy</option>
                                <option value="android">Android</option>
                                <option value="xbox">Xbox</option>
                                <option value="nes">NES</option>
                                <option value="snes">SNES</option>
                            </select>
                            <select id="sort-filter">
                                <option value="name">Sort by Name</option>
                                <option value="rating">Sort by Rating</option>
                                <option value="platform">Sort by Platform</option>
                            </select>
                        </div>
                    </div>
                    <div id="games-container" class="games-container">
                        <!-- Games will be loaded here dynamically -->
                    </div>
                </main>
                
                <!-- Game Details Footer -->
                <footer id="game-details-footer" class="game-details-footer glass">
                    <div class="game-details-content">
                        <div class="game-details-header">
                            <h3 id="selected-game-title">No Game Selected</h3>
                            <div class="footer-controls">
                                <button id="pin-footer-btn" class="action-btn small" title="Pin Footer">üìå</button>
                                <button id="close-game-details" class="close-btn">&times;</button>
                            </div>
                        </div>
                        <div id="game-details-info" class="game-details-info">
                            <!-- Game details will be displayed here -->
                        </div>
                    </div>
                </footer>
            </div>
        </div>
    </div>

    <!-- Theme Manager Modal -->
    <div id="theme-manager-modal" class="theme-manager-modal glass">
        <div class="theme-manager-content">
            <div id="theme-manager-header" class="theme-manager-header">
                <h2>Theme Manager</h2>
                <div class="window-controls">
                    <button id="pin-theme-manager" class="pin-btn" title="Dock to RightSide">üìå</button>
                    <button id="close-theme-manager" class="close-btn">&times;</button>
                </div>
            </div>
            
            <div class="theme-manager-body">
                <div class="theme-manager-tabs">
                    <button class="tab-btn active" data-tab="local">My Themes</button>
                    <button class="tab-btn" data-tab="marketplace">Marketplace</button>
                </div>

                <div id="local-themes-view" class="tab-content active">
                    <!-- Global Theme Settings -->
                    <div class="theme-manager-section global-settings">
                        <h3 data-i18n="theme.globalOptions">Global Options</h3>
                        <div class="settings-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; padding: 15px; background: var(--bg-secondary); border-radius: 8px; border: 1px solid var(--border-color);">
                            <div class="form-group">
                                <label for="global-corner-style" data-i18n="theme.cornerStyle">Corner Style:</label>
                                <select id="global-corner-style">
                                    <option value="rounded" data-i18n="theme.cornerStyleOptions.rounded"></option>
                                    <option value="futuristic" data-i18n="theme.cornerStyleOptions.futuristic"></option>
                                    <option value="semi-rounded" data-i18n="theme.cornerStyleOptions.semiRounded"></option>
                                    <option value="sharp" data-i18n="theme.cornerStyleOptions.sharp"></option>
                                </select>
                            </div>
                            <div class="form-group checkbox-group" style="display: flex; align-items: center; gap: 10px; height: 100%;">
                                <label for="global-override-background" style="display: flex; align-items: center; gap: 10px; cursor: pointer; margin: 0;">
                                    <input type="checkbox" id="global-override-background">
                                    <span style="font-weight: bold;" data-i18n="theme.overrideBackground"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="theme-manager-section">
                        <h3 data-i18n="theme.presets">Preset Themes</h3>
                        <div id="preset-themes" class="preset-themes-list"></div>
                    </div>

                    <div class="theme-manager-section">
                        <h3 data-i18n="theme.custom">Custom Themes</h3>
                        <div id="custom-themes" class="custom-themes-list"></div>
                        <button id="create-theme-btn" class="action-btn">+ Create New Theme</button>
                    </div>

                    <!-- Create/Edit Theme Form -->
                    <div id="theme-form" class="theme-form" style="display: none;">
                        <h3 id="form-title">Create New Theme</h3>
                        
                        <div class="form-group">
                            <label for="theme-name">Theme Name:</label>
                            <input type="text" id="theme-name" placeholder="My Custom Theme">
                        </div>

                        <div class="color-inputs">
                            <div class="form-group">
                                <label for="color-bg-primary">Primary Background:</label>
                                <div class="color-input-group">
                                    <input type="color" id="color-bg-primary" class="color-picker">
                                    <input type="text" class="color-text" placeholder="#000000" readonly>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="color-text-primary">Primary Text:</label>
                                <div class="color-input-group">
                                    <input type="color" id="color-text-primary" class="color-picker">
                                    <input type="text" class="color-text" placeholder="#ffffff" readonly>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="color-text-secondary">Secondary Text:</label>
                                <div class="color-input-group">
                                    <input type="color" id="color-text-secondary" class="color-picker">
                                    <input type="text" class="color-text" placeholder="#ffffff" readonly>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="color-accent">Accent Color:</label>
                                <div class="color-input-group">
                                    <input type="color" id="color-accent" class="color-picker">
                                    <input type="text" class="color-text" placeholder="#66ccff" readonly>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="color-bg-secondary">Secondary Background:</label>
                                <div class="color-input-group">
                                    <input type="color" id="color-bg-secondary" class="color-picker">
                                    <input type="text" class="color-text" placeholder="#1a1a1a" readonly>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="color-bg-header">Header Background:</label>
                                <div class="color-input-group">
                                    <input type="color" id="color-bg-header" class="color-picker">
                                    <input type="text" class="color-text" placeholder="#2d2d2d" readonly>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="color-bg-sidebar">Sidebar Background:</label>
                                <div class="color-input-group">
                                    <input type="color" id="color-bg-sidebar" class="color-picker">
                                    <input type="text" class="color-text" placeholder="#333333" readonly>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="color-bg-actionbar">Action Bar Background:</label>
                                <div class="color-input-group">
                                    <input type="color" id="color-bg-actionbar" class="color-picker">
                                    <input type="text" class="color-text" placeholder="#252525" readonly>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="color-border">Border Color:</label>
                                <div class="color-input-group">
                                    <input type="color" id="color-border" class="color-picker">
                                    <input type="text" class="color-text" placeholder="#333333" readonly>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="color-bg-tertiary">Tertiary Background:</label>
                                <div class="color-input-group">
                                    <input type="color" id="color-bg-tertiary" class="color-picker">
                                    <input type="text" class="color-text" placeholder="#333333" readonly>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="color-success">Success Color:</label>
                                <div class="color-input-group">
                                    <input type="color" id="color-success" class="color-picker">
                                    <input type="text" class="color-text" placeholder="#4caf50" readonly>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="color-danger">Danger Color:</label>
                                <div class="color-input-group">
                                    <input type="color" id="color-danger" class="color-picker">
                                    <input type="text" class="color-text" placeholder="#f44336" readonly>
                                </div>
                            </div>
                        </div>

                        <!-- Background Image Section -->
                        <!-- Style Options -->

                        <div class="background-section">
                            <h4 data-i18n="theme.backgroundImage">Background Image</h4>
                            
                            <div class="form-group">
                                <label for="bg-image-input" data-i18n="theme.uploadImage">Upload Image:</label>
                                <input type="file" id="bg-image-input" accept="image/*">
                                <span id="bg-image-name" class="image-name"></span>
                                <button type="button" id="clear-bg-image-btn" class="action-btn remove-btn" style="display: none;" data-i18n="theme.clearImage">Clear Image</button>
                            </div>

                            <div class="form-group">
                                <label for="bg-position" data-i18n="theme.position">Position:</label>
                                <select id="bg-position">
                                    <option value="centered" data-i18n="theme.centered">Centered (Moves with window)</option>
                                    <option value="fixed" data-i18n="theme.fixed">Fixed (Stays in place)</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="bg-background-repeat">Background Repeat:</label>
                                <select id="bg-background-repeat">
                                    <option value="no-repeat" data-i18n="theme.bgRepeatOptions.noRepeat">No Repeat</option>
                                    <option value="repeat" data-i18n="theme.bgRepeatOptions.repeat">Repeat</option>
                                    <option value="repeat-x" data-i18n="theme.bgRepeatOptions.repeatX">Repeat Horizontally</option>
                                    <option value="repeat-y" data-i18n="theme.bgRepeatOptions.repeatY">Repeat Vertically</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="bg-scale" data-i18n="theme.scaleMode">Scale Mode:</label>
                                <select id="bg-scale">
                                    <option value="original" data-i18n="theme.originalSize">Original Size</option>
                                    <option value="stretch" data-i18n="theme.stretch">Stretch (Fill)</option>
                                    <option value="crop" data-i18n="theme.crop">Crop (Cover)</option>
                                    <option value="zoom" data-i18n="theme.zoom">Zoom (Contain)</option>
                                </select>
                            </div>

                            <div id="bg-preview" class="bg-preview" style="display: none;">
                                <img id="bg-preview-img" src="" alt="Background preview">
                            </div>
                        </div>

                        <!-- Card Effects Section -->
                        <div class="card-effects-section">
                            <h4 data-i18n="theme.cardEffects">Card Effects</h4>
                            
                            <div class="form-group checkbox-group">
                                <label for="glass-effect-toggle">
                                    <input type="checkbox" id="glass-effect-toggle" checked>
                                    <span data-i18n="theme.enableGlassEffect">Enable Glass Morphism Effect</span>
                                </label>
                                <p class="checkbox-description" data-i18n="theme.glassEffectDesc">Apply frosted glass effect to game cards</p>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button id="reset-theme-defaults" class="action-btn" data-i18n="theme.resetDefaults">Reset Defaults</button>
                            <button id="save-theme-btn" class="action-btn launch-btn" data-i18n="theme.saveTheme">Save Theme</button>
                            <button id="cancel-theme-btn" class="action-btn remove-btn" data-i18n="theme.cancel">Cancel</button>
                        </div>
                    </div>
                </div>

                <div id="marketplace-view" class="tab-content" style="display: none;">
                    <div class="theme-manager-section">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <h3 style="margin: 0;" data-i18n="theme.communityWorkshop">Community Workshop</h3>
                            <button id="refresh-themes-btn" class="action-btn small" title="Refresh Themes" data-i18n="theme.refresh">üîÑ Refresh</button>
                        </div>
                        <div id="marketplace-list" class="marketplace-grid">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Webhook Input Modal -->
    <div id="webhook-modal" class="modal glass" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 2000; align-items: center; justify-content: center;">
        <div class="modal-content" style="background: var(--bg-secondary); padding: 20px; border-radius: 8px; width: 400px; max-width: 90%; box-shadow: 0 4px 6px rgba(0,0,0,0.1); border: 1px solid var(--border-color);">
            <h3 style="margin-top: 0;" data-i18n="webhook.title">Enter Discord Webhook URL</h3>
            <p style="color: var(--text-secondary); margin-bottom: 15px;">
                <span data-i18n="webhook.description">To upload themes, please provide a valid Discord Webhook URL. This will be saved locally.</span>
                <br>
                <a href="https://discord.gg/EtKvZ2F" target="_blank" style="color: var(--accent-color); text-decoration: none; font-size: 0.9em; margin-top: 5px; display: inline-block;" data-i18n="webhook.getIt">No webhook yet? Get it in the Discord</a>
            </p>
            <input type="text" id="webhook-input" placeholder="https://discord.com/api/webhooks/..." style="width: 100%; padding: 8px; margin-bottom: 15px; background: var(--bg-tertiary); border: 1px solid var(--border-color); color: var(--text-primary); border-radius: 4px;">
            <div style="display: flex; justify-content: flex-end; gap: 10px;">
                <button id="webhook-cancel-btn" class="action-btn remove-btn" data-i18n="buttons.cancel">Cancel</button>
                <button id="webhook-save-btn" class="action-btn launch-btn" data-i18n="buttons.saveAndContinue">Save & Continue</button>
            </div>
        </div>
    </div>

    <!-- Language Manager Modal -->
    <div id="language-manager-modal" class="theme-manager-modal glass" style="display: none;">
        <div class="theme-manager-content">
            <div id="language-manager-header" class="theme-manager-header">
                <h2 data-i18n="language.managerTitle">Language Manager</h2>
                <div class="window-controls">
                    <button id="pin-language-manager" class="pin-btn" title="Dock to RightSide">üìå</button>
                    <button id="close-language-manager" class="close-btn">&times;</button>
                </div>
            </div>
            
            <div class="theme-manager-body">
                <div class="theme-manager-tabs">
                    <button class="tab-btn active" data-tab="lang-list" data-i18n="language.tabs.languages">Languages</button>
                    <button class="tab-btn" data-tab="lang-edit" style="display:none" data-i18n="language.tabs.editor">Editor</button>
                </div>

                <div id="lang-list-view" class="tab-content active">
                    <div class="theme-manager-section">
                        <h3 data-i18n="language.installed">Installed Languages</h3>
                        <div id="language-list" class="language-list">
                            <!-- Populated dynamically -->
                        </div>
                        <button id="add-language-btn" class="action-btn" data-i18n="language.addNew">+ Add New Language</button>
                    </div>
                </div>

                <div id="lang-edit-view" class="tab-content" style="display: none;">
                     <div class="manager-section">
                        <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 15px; flex-shrink: 0;">
                            <button id="back-to-lang-list" class="action-btn small" data-i18n="buttons.back">‚ùÆ Back</button>
                            <h3 id="editing-lang-name" style="margin: 0;">Editing English</h3>
                        </div>
                        
                        <div class="search-bar" style="margin-bottom: 15px;">
                            <input type="text" id="lang-search-keys" placeholder="Search keys or values..." data-i18n-placeholder="language.searchPlaceholder">
                        </div>

                        <div id="lang-keys-list" class="lang-keys-list">
                            <!-- Key-Value pairs -->
                        </div>
                        
                        <div class="form-actions">
                             <button id="save-lang-btn" class="action-btn launch-btn" data-i18n="buttons.saveChanges">Save Changes</button>
                        </div>
                     </div>
                </div>
            </div>
        </div>
    </div>

    <script src="./i18n.js"></script>
    <script src="./translations-loader.js"></script>
    <script src="dist/renderer.bundle.js"></script>
</body>
</html>
