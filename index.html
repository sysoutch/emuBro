<!DOCTYPE html>
<html lang="en" data-glass-effect="enabled" data-booting="1">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' data: blob: https:; script-src 'self' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; img-src 'self' data: blob: https:; connect-src 'self' https: http:;">
    <title data-i18n="app.title">emuBro</title>
    <style>
        html[data-booting="1"],
        html[data-booting="1"] body {
            background: #0b1220;
            overflow: hidden;
        }

        html[data-booting="1"] .app-container {
            opacity: 0;
            visibility: hidden;
        }
    </style>
</head>
<body>
    <div class="win-top-drag-strip" aria-hidden="true"></div>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <!-- circle with transparent logo on top -->
                <div class="logo-circle"></div>
                <img src="./logo.png" alt="emuBro Logo">
                <h1><span class="logo-text-prefix">EMU</span><span class="logo-text-suffix">BRO</span></h1>
            </div>
            <nav class="navigation">
                <ul>
                    <li><a href="#" class="active" data-nav-target="library" data-i18n="header.library">Library</a></li>
                    <li><a href="#" data-nav-target="tools" data-i18n="header.tools">Tools</a></li>
                    <li><a href="#" data-nav-target="support" data-i18n="header.support">Support</a></li>
                    <li><a href="#" data-nav-target="community" data-i18n="header.community">Community</a></li>
                </ul>
            </nav>
            <div class="user-actions">
                <div class="search-bar global-search-bar">
                    <input
                        type="text"
                        id="global-game-search"
                        class="global-search-input"
                        placeholder="Search games..."
                        data-i18n-placeholder="filters.search"
                    >
                    <button
                        type="button"
                        id="global-search-clear-btn"
                        class="search-clear-btn"
                        aria-label="Clear search"
                        title="Clear search"
                    >&times;</button>
                </div>
                <div class="header-search-theme-drag-gap" aria-hidden="true"></div>
                <div class="theme-toggle-wrapper">
                    <button id="theme-controls-toggle" class="theme-controls-toggle" type="button" aria-expanded="false" aria-controls="theme-controls-content" data-i18n="theme.themeManager">Theme</button>
                    <div id="theme-controls-content" class="theme-controls-content header-compact-menu">
                        <div class="form-group dropdown-with-button-wrapper">
                            <select id="theme-select">
                                <option value="dark" data-i18n="theme.darkTheme"></option>
                                <option value="light" data-i18n="theme.lightTheme"></option>
                            </select>
                            <button id="theme-toggle-btn" class="theme-toggle icon-only-btn" title="Toggle Light/Dark Mode" aria-label="Toggle Light/Dark Mode" data-i18n-title="header.toggleTheme" data-i18n-aria-label="header.toggleTheme">
                                <span class="icon-svg" aria-hidden="true">
                                    <svg viewBox="0 0 24 24">
                                        <circle cx="12" cy="12" r="4"></circle>
                                        <path d="M12 2v2"></path>
                                        <path d="M12 20v2"></path>
                                        <path d="m4.9 4.9 1.4 1.4"></path>
                                        <path d="m17.7 17.7 1.4 1.4"></path>
                                        <path d="M2 12h2"></path>
                                        <path d="M20 12h2"></path>
                                        <path d="m4.9 19.1 1.4-1.4"></path>
                                        <path d="m17.7 6.3 1.4-1.4"></path>
                                    </svg>
                                </span>
                            </button>
                            <button id="invert-colors-btn" class="theme-toggle icon-only-btn" title="Invert Colors" aria-label="Invert Colors" data-i18n-title="theme.invertColors" data-i18n-aria-label="theme.invertColors">
                                <span class="icon-svg" aria-hidden="true">
                                    <svg viewBox="0 0 24 24">
                                        <circle cx="12" cy="12" r="9"></circle>
                                        <path d="M12 3a9 9 0 0 0 0 18V3Z"></path>
                                    </svg>
                                </span>
                            </button>
                            <button id="theme-manager-btn" class="theme-manager-btn icon-only-btn" title="Manage Themes" aria-label="Manage Themes" data-i18n-title="header.manageThemes" data-i18n-aria-label="header.manageThemes">
                                <span class="icon-svg" aria-hidden="true">
                                    <svg viewBox="0 0 24 24">
                                        <path d="M12 8.5a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7Z"></path>
                                        <path d="M19.4 15a1 1 0 0 0 .2 1.1l.1.1a1 1 0 0 1 0 1.4l-1 1a1 1 0 0 1-1.4 0l-.1-.1a1 1 0 0 0-1.1-.2 1 1 0 0 0-.6.9V20a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-.2a1 1 0 0 0-.6-.9 1 1 0 0 0-1.1.2l-.1.1a1 1 0 0 1-1.4 0l-1-1a1 1 0 0 1 0-1.4l.1-.1a1 1 0 0 0 .2-1.1 1 1 0 0 0-.9-.6H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1h.2a1 1 0 0 0 .9-.6 1 1 0 0 0-.2-1.1l-.1-.1a1 1 0 0 1 0-1.4l1-1a1 1 0 0 1 1.4 0l.1.1a1 1 0 0 0 1.1.2 1 1 0 0 0 .6-.9V4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v.2a1 1 0 0 0 .6.9 1 1 0 0 0 1.1-.2l.1-.1a1 1 0 0 1 1.4 0l1 1a1 1 0 0 1 0 1.4l-.1.1a1 1 0 0 0-.2 1.1 1 1 0 0 0 .9.6H20a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-.2a1 1 0 0 0-.9.6Z"></path>
                                    </svg>
                                </span>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="header-inline-drag-gap" aria-hidden="true"></div>
                <div class="form-group language-selector-wrapper">
                    <div class="language-controls-wrapper">
                        <button id="language-controls-toggle" class="language-controls-toggle" type="button" aria-expanded="false" aria-controls="language-controls-content" data-i18n="language.tabs.languages">Languages</button>
                        <div id="language-controls-content" class="language-controls-content header-compact-menu">
                            <div class="form-group dropdown-with-button-wrapper">
                                <div id="language-dropdown" class="custom-select" title="Select Language" data-i18n-title="language.selectLanguage">
                                    <div class="selected-option">
                                        <div style="display: flex; align-items: center; gap: 8px;">
                                            <span id="current-flag" class="fi"></span>
                                            <span id="current-language-name" data-i18n="language.selectLanguage">Select Language</span>
                                        </div>
                                    </div>
                                    <ul id="language-options" class="options-list">
                                        <!-- populated dynamically -->
                                    </ul>
                                </div>
                                
                                <button id="language-manager-btn" class="theme-manager-btn icon-only-btn" title="Manage Languages" aria-label="Manage Languages" data-i18n-title="language.managerTitle" data-i18n-aria-label="language.managerTitle">
                                    <span class="icon-svg" aria-hidden="true">
                                        <svg viewBox="0 0 24 24">
                                            <circle cx="12" cy="12" r="9"></circle>
                                            <path d="M3 12h18"></path>
                                            <path d="M12 3c2.7 2.4 4.2 5.7 4.2 9s-1.5 6.6-4.2 9"></path>
                                            <path d="M12 3c-2.7 2.4-4.2 5.7-4.2 9s1.5 6.6 4.2 9"></path>
                                        </svg>
                                    </span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Custom window controls (used when frameless on Windows) -->
            <div class="window-drag-gap" aria-hidden="true"></div>
            <div class="window-controls-main" id="window-controls-main" aria-label="Window controls">
                <button class="win-btn win-btn-about" id="win-about-btn" title="About" aria-label="About">i</button>
                <button class="win-btn win-btn-update" id="win-update-btn" title="Updates available" aria-label="Updates available" hidden>⬇</button>
                <button class="win-btn" id="win-min-btn" title="Minimize" aria-label="Minimize">_</button>
                <button class="win-btn" id="win-max-btn" title="Maximize" aria-label="Maximize">▢</button>
                <button class="win-btn win-btn-close" id="win-close-btn" title="Close" aria-label="Close">×</button>
            </div>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <div class="drop-zone-overlay">
                <div>
                    <div class="drop-zone-overlay-text" data-i18n="dropZone.text">Drop Folder or Drop File</div>
                </div>
            </div>
            <!-- Sidebar: icon rail + expandable content -->
            <aside class="sidebar sidebar--collapsed" id="sidebar">
                <div class="sidebar-rail" aria-label="Primary navigation">
                    <button id="sidebar-toggle" class="rail-btn rail-brand" type="button" aria-expanded="false" title="Expand sidebar" data-i18n-title="sidebar.expand">
                        <span class="rail-icon" aria-hidden="true">
                            <!-- Grid icon -->
                            <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M4 4h6v6H4zM14 4h6v6h-6zM4 14h6v6H4zM14 14h6v6h-6z"/>
                            </svg>
                        </span>
                    </button>

                    <div class="rail-group">
                        <button class="rail-btn rail-nav is-active" type="button" data-rail-target="library" title="Library" data-i18n-title="header.library">
                            <span class="rail-icon" aria-hidden="true">
                                <!-- Controller icon -->
                                <svg viewBox="0 0 24 24" width="26" height="26" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M7 16.5c-1.8 0-3.3-1.3-3.7-3l-.6-2.4C2.2 9 3.5 7 5.7 7h12.6c2.2 0 3.5 2 3 4.1l-.6 2.4c-.4 1.7-1.9 3-3.7 3-.9 0-1.7-.3-2.4-.9l-1.2-1.1c-.8-.7-2-.7-2.8 0l-1.2 1.1c-.7.6-1.5.9-2.4.9z"/>
                                    <path d="M7.4 11.3h2.8M8.8 9.9v2.8"/>
                                    <path d="M15.9 10.6h.01M18 12.7h.01"/>
                                </svg>
                            </span>
                            <span class="rail-label" data-i18n="header.library">Library</span>
                        </button>

                        <button class="rail-btn rail-nav" type="button" data-rail-target="tools" title="Tools" data-i18n-title="header.tools">
                            <span class="rail-icon" aria-hidden="true">
                                <!-- Rocket icon -->
                                <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M14 3c3 1 5 4 5 7-1 1-2 2-3 3l-3-3c1-1 2-2 3-3-1-2-2-3-2-4z"/>
                                    <path d="M11 6c-3 3-5 6-6 10 4-1 7-3 10-6"/>
                                    <path d="M9 15l-3 6 6-3"/>
                                </svg>
                            </span>
                            <span class="rail-label" data-i18n="header.tools">Tools</span>
                        </button>

                        <button class="rail-btn rail-nav" type="button" data-rail-target="support" title="Support" data-i18n-title="header.support">
                            <span class="rail-icon" aria-hidden="true">
                                <!-- Life buoy icon -->
                                <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="12" cy="12" r="9"/>
                                    <circle cx="12" cy="12" r="3"/>
                                    <path d="M18.4 5.6 14 10"/>
                                    <path d="M10 14 5.6 18.4"/>
                                    <path d="M18.4 18.4 14 14"/>
                                    <path d="M10 10 5.6 5.6"/>
                                </svg>
                            </span>
                            <span class="rail-label" data-i18n="header.support">Support</span>
                        </button>

                        <button class="rail-btn rail-nav" type="button" data-rail-target="community" title="Community" data-i18n-title="header.community">
                            <span class="rail-icon" aria-hidden="true">
                                <!-- Chat icon -->
                                <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M21 11.5a8.5 8.5 0 0 1-8.5 8.5H8l-5 3 1.5-4.5A8.5 8.5 0 1 1 21 11.5z"/>
                                </svg>
                            </span>
                            <span class="rail-label" data-i18n="header.community">Community</span>
                        </button>
                    </div>

                    <div class="rail-spacer"></div>
                    <div class="rail-group rail-group--bottom">
                        <button class="rail-btn rail-nav" type="button" data-rail-target="profile" title="Profile" data-i18n-title="header.profile">
                            <span class="rail-icon" aria-hidden="true">
                                <!-- User icon -->
                                <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M20 21a8 8 0 0 0-16 0"/>
                                    <circle cx="12" cy="8" r="4"/>
                                </svg>
                            </span>
                            <span class="rail-label" data-i18n="header.profile">Profile</span>
                        </button>

                        <button class="rail-btn rail-nav" type="button" data-rail-target="settings" title="Settings" data-i18n-title="header.settings">
                            <span class="rail-icon" aria-hidden="true">
                                <!-- Gear icon -->
                                <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M12 15.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z"/>
                                    <path d="M19.4 15a7.8 7.8 0 0 0 .1-1l2-1.2-2-3.5-2.3.5a8 8 0 0 0-1.6-1l-.3-2.4H8.7l-.3 2.4a8 8 0 0 0-1.6 1l-2.3-.5-2 3.5 2 1.2a7.8 7.8 0 0 0 .1 1 7.8 7.8 0 0 0-.1 1l-2 1.2 2 3.5 2.3-.5a8 8 0 0 0 1.6 1l.3 2.4h6.6l.3-2.4a8 8 0 0 0 1.6-1l2.3.5 2-3.5-2-1.2a7.8 7.8 0 0 0-.1-1z"/>
                                </svg>
                            </span>
                            <span class="rail-label" data-i18n="header.settings">Settings</span>
                        </button>
                    </div>
                </div>

                <div class="sidebar-content" id="sidebar-content">
                    <div class="sidebar-section">
                        <h3 data-i18n="sidebar.library">Library</h3>
                        <ul>
                            <li class="active"><a href="#" data-view="all" data-i18n="sidebar.allGames">All Games</a></li>
                            <li><a href="#" data-view="favorite">Favorite</a></li>
                            <li><a href="#" data-view="recent" data-i18n="sidebar.recentlyPlayed">Recently Played</a></li>
                            <li><a href="#" data-view="suggested" data-i18n="sidebar.suggested">Suggested</a></li>
                            <li><a href="#" data-view="emulators" data-i18n="sidebar.emulators">Emulators</a></li>
                        </ul>
                    </div>
                    <div class="sidebar-section">
                        <h3 data-i18n="sidebar.categories">Categories</h3>
                        <ul id="categories-list">
                            <li><a href="#" data-genre="all" data-i18n="sidebar.all">All</a></li>
                            <li><a href="#" data-genre="Platformer" data-i18n="sidebar.platformer">Platformer</a></li>
                            <li><a href="#" data-genre="Adventure" data-i18n="sidebar.adventure">Adventure</a></li>
                            <li><a href="#" data-genre="RPG" data-i18n="sidebar.rpg">RPG</a></li>
                            <li><a href="#" data-genre="Action" data-i18n="sidebar.action">Action</a></li>
                            <li><a href="#" data-genre="Puzzle" data-i18n="sidebar.puzzle">Puzzle</a></li>
                            <li><a href="#" data-genre="Fighting" data-i18n="sidebar.fighting">Fighting</a></li>
                        </ul>
                    </div>
                    <div class="sidebar-section">
                        <h3 data-i18n="sidebar.stats">Stats</h3>
                        <div class="stats">
                            <p><span data-i18n="sidebar.totalGames">Total Games</span>: <span id="total-games">0</span></p>
                            <p><span data-i18n="sidebar.totalEmulators">Total Emulators</span>: <span id="total-emulators">0</span></p>
                            <p><span data-i18n="sidebar.playTime">Play Time</span>: <span id="play-time">0</span> <span data-i18n="sidebar.hours">hours</span></p>
                        </div>
                    </div>
                    <div class="sidebar-section">
                        <h3 data-i18n="sidebar.tools">Tools</h3>
                        <ul id="tools-list">
                            <li><a href="#" data-tool="memory-card" class="active" data-i18n="sidebar.memoryCardReader">Memory Card Reader</a></li>
                            <li><a href="#" data-tool="cover-downloader" data-i18n="sidebar.coverDownloader">Cover Downloader</a></li>
                            <li><a href="#" data-tool="cue-maker" data-i18n="sidebar.cueMaker">CUE Maker</a></li>
                            <li><a href="#" data-tool="ecm-unecm" data-i18n="sidebar.ecmUnecm">ECM/UNECM</a></li>
                            <li><a href="#" data-tool="remote-library" data-i18n="sidebar.remoteLibrary">Remote Library</a></li>
                            <li><a href="#" data-tool="bios" data-i18n="tools.biosManager">BIOS Manager</a></li>
                            <li><a href="#" data-tool="rom-ripper" data-i18n="sidebar.romRipper">ROM Ripper</a></li>
                            <li><a href="#" data-tool="game-database" data-i18n="sidebar.gameDatabase">Game Database</a></li>
                            <li><a href="#" data-tool="cheat-codes" data-i18n="sidebar.cheatCodes">Cheat Codes</a></li>
                        </ul>
                    </div>
                </div>
            </aside>

            <!-- Game Content Wrapper -->
            <div class="game-content-wrapper">
                <!-- View Toggle Controls -->
                <div class="view-controls">
                    <button class="view-btn active" data-view="cover" data-i18n="views.cover">Cover</button>
                    <button class="view-btn" data-view="list" data-i18n="views.list">List</button>
                    <button class="view-btn" data-view="table" data-i18n="views.table">Table</button>
                    <button class="view-btn" data-view="slideshow" data-i18n="views.slideshow">Slideshow</button>
                    <button class="view-btn" data-view="focus" data-i18n="views.focus">Focus</button>
                    <button class="view-btn" data-view="random" data-i18n="views.random">Random</button>

                    <div class="view-size-control">
                        <label for="view-size-slider" data-i18n="views.size">Size</label>
                        <input id="view-size-slider" type="range" min="70" max="140" step="5" value="100" />
                        <span id="view-size-value">100%</span>
                    </div>
                </div>

                <!-- Game Grid -->
                <main class="game-grid">
                    <div class="game-header">
                        <h2 id="games-header" data-i18n="gameGrid.featuredGames">Featured Games</h2>
                        <div class="filters">
                            <button type="button" id="library-filters-popup-btn" class="action-btn small filters-popup-btn" title="Filter Options">
                                <span class="icon-svg" aria-hidden="true">
                                    <svg viewBox="0 0 24 24">
                                        <path d="M22 3H2l8 9.46V19l4 2v-8.54L22 3z"></path>
                                    </svg>
                                </span>
                                <span>Filters</span>
                            </button>
                            <label id="emulators-installed-toggle-wrap" class="emulators-installed-toggle is-hidden">
                                <input id="emulators-installed-toggle" type="checkbox" />
                                <span data-i18n="sidebar.installed">Installed</span>
                            </label>
                            <select id="platform-filter">
                                <option value="all" data-i18n="gameGrid.allPlatforms">All Platforms</option>
                                <option value="gameboy">Gameboy</option>
                                <option value="android">Android</option>
                                <option value="xbox">Xbox</option>
                                <option value="nes">NES</option>
                                <option value="snes">SNES</option>
                            </select>
                            <div class="filter-pair-wrapper filter-pair-wrapper-region-language">
                                <button
                                    id="filters-region-language-toggle"
                                    class="filter-pair-toggle"
                                    type="button"
                                    aria-expanded="false"
                                    aria-controls="filters-region-language-content"
                                >Region + Language</button>
                                <div id="filters-region-language-content" class="filter-pair-content">
                                    <select id="game-region-filter">
                                        <option value="all">All Regions</option>
                                        <option value="eu">EU</option>
                                        <option value="us">US</option>
                                        <option value="jp">JP</option>
                                    </select>
                                    <select id="game-language-filter">
                                        <option value="all">All Languages</option>
                                        <option value="en">English</option>
                                        <option value="de">German</option>
                                        <option value="fr">French</option>
                                        <option value="es">Spanish</option>
                                        <option value="it">Italian</option>
                                        <option value="jp">Japanese</option>
                                        <option value="pt">Portuguese</option>
                                        <option value="nl">Dutch</option>
                                        <option value="sv">Swedish</option>
                                        <option value="no">Norwegian</option>
                                        <option value="da">Danish</option>
                                        <option value="fi">Finnish</option>
                                        <option value="pl">Polish</option>
                                        <option value="ru">Russian</option>
                                        <option value="tr">Turkish</option>
                                        <option value="cs">Czech</option>
                                        <option value="hu">Hungarian</option>
                                        <option value="ko">Korean</option>
                                        <option value="zh">Chinese</option>
                                    </select>
                                </div>
                            </div>
                            <div class="filter-pair-wrapper filter-pair-wrapper-group-sort">
                                <button
                                    id="filters-group-sort-toggle"
                                    class="filter-pair-toggle"
                                    type="button"
                                    aria-expanded="false"
                                    aria-controls="filters-group-sort-content"
                                >Group + Sort</button>
                                <div id="filters-group-sort-content" class="filter-pair-content">
                                    <select id="group-filter">
                                        <option value="none" data-i18n="filters.groupNone">None</option>
                                        <option value="platform" data-i18n="filters.groupPlatform">Platform</option>
                                        <option value="company" data-i18n="filters.groupCompany">Company</option>
                                    </select>
                                    <select id="sort-filter">
                                        <option value="name" data-i18n="gameGrid.sortByName">Sort by Name</option>
                                        <option value="rating" data-i18n="gameGrid.sortByRating">Sort by Rating</option>
                                        <option value="platform" data-i18n="gameGrid.sortByPlatform">Sort by Platform</option>
                                        <option value="recently-played">Recently Played</option>
                                    </select>
                                </div>
                            </div>
                            <label id="group-same-names-toggle-wrap" class="group-same-names-toggle">
                                <input id="group-same-names-toggle" type="checkbox" />
                                <span data-i18n="filters.groupSameNames">Group same names</span>
                            </label>
                        </div>
                    </div>
                    <div class="game-scroll-body">
                        <section id="suggested-panel" class="suggested-panel is-hidden" aria-live="polite"></section>
                        <div id="games-container" class="games-container">
                            <!-- Games will be loaded here dynamically -->
                        </div>
                    </div>
                </main>
                
                <!-- Game Details Footer -->
                <footer id="game-details-footer" class="game-details-footer glass">
                    <div class="game-details-content">
                        <div class="game-details-header">
                            <h3 data-i18n="footer.libraryPanel">Library Panel</h3>
                            <div class="footer-controls">
                                <button id="pin-footer-btn" class="action-btn small icon-only-btn" title="Pin Footer" aria-label="Pin Footer" data-i18n-title="footer.pinFooter" data-i18n-aria-label="footer.pinFooter">
                                    <span class="icon-svg" aria-hidden="true">
                                        <svg viewBox="0 0 24 24">
                                            <path d="M8.5 4h7l-1.5 4.8v3.1l1.4 1.5h-6.8l1.4-1.5V8.8L8.5 4Z"></path>
                                            <path d="M12 13.4V20"></path>
                                        </svg>
                                    </span>
                                </button>
                                <button id="close-game-details" class="close-btn">&times;</button>
                            </div>
                        </div>
                        <div class="game-details-tabs" role="tablist" aria-label="Footer tabs">
                            <button class="game-details-tab is-active" type="button" role="tab" data-footer-tab="browse" data-i18n="footer.browseComputer">Browse Computer</button>
                            <button class="game-details-tab" type="button" role="tab" data-footer-tab="notifications" data-i18n="footer.notifications">Notifications</button>
                            <button class="game-details-tab" type="button" role="tab" data-footer-tab="covers" data-i18n="footer.findCovers">Find Covers</button>
                        </div>
                        <div class="game-details-tab-panels">
                            <section class="game-details-tab-panel is-active" data-footer-panel="browse">
                                <div class="browse-scope-bar">
                                    <span class="browse-scope-label" data-i18n="footer.scope">Scope</span>
                                    <div class="browse-scope-options" role="group" aria-label="Browse scope">
                                        <button class="browse-scope-btn is-active" type="button" data-browse-scope="both" data-i18n="footer.scopeBoth">Games + Emulators</button>
                                        <button class="browse-scope-btn" type="button" data-browse-scope="games" data-i18n="footer.scopeGames">Games</button>
                                        <button class="browse-scope-btn" type="button" data-browse-scope="emulators" data-i18n="footer.scopeEmulators">Emulators</button>
                                    </div>
                                </div>
                                <div class="browse-computer-grid">
                                    <button id="browse-quick-search-btn" class="browse-action-card" type="button">
                                        <span class="browse-action-title" data-i18n="footer.quickSearch">Quick Search</span>
                                        <span class="browse-action-subtitle" data-i18n="footer.quickSearchDesc">Find new files in common parent folders from your last successful search.</span>
                                    </button>
                                    <button id="browse-search-games-btn" class="browse-action-card" type="button">
                                        <span class="browse-action-title" data-i18n="footer.searchGamesEmulators">Search Games/Emulators...</span>
                                        <span class="browse-action-subtitle" data-i18n="footer.searchGamesEmulatorsDesc">Pick a folder and scan custom locations.</span>
                                    </button>
                                    <button id="browse-archives-btn" class="browse-action-card" type="button">
                                        <span class="browse-action-title" data-i18n="footer.archives">Archives</span>
                                        <span class="browse-action-subtitle" data-i18n="footer.archivesDesc">Browse archive files in your library paths.</span>
                                    </button>
                                    <button id="browse-zip-btn" class="browse-action-card" type="button">
                                        <span class="browse-action-title" data-i18n="footer.zip">Zip</span>
                                        <span class="browse-action-subtitle" data-i18n="footer.zipDesc">Scan ZIP content and setup files.</span>
                                    </button>
                                </div>
                            </section>
                            <section class="game-details-tab-panel" data-footer-panel="notifications">
                                <div id="footer-notifications-list" class="footer-notifications-list"></div>
                            </section>
                            <section class="game-details-tab-panel" data-footer-panel="covers">
                                <div class="footer-covers-placeholder">
                                    <span data-i18n="footer.coversPlaceholder">Drop files or folders here to search for covers.</span>
                                </div>
                            </section>
                        </div>
                    </div>
                </footer>
            </div>
        </div>
        <button id="open-footer-btn" class="open-footer-btn" type="button" aria-label="Open bottom panel" data-i18n-aria-label="footer.openBottomPanel" data-i18n="footer.browse">Browse</button>
    </div>

    <!-- Theme Manager Modal -->
    <div id="theme-manager-modal" class="theme-manager-modal glass">
        <div class="theme-manager-content">
            <div id="theme-manager-header" class="theme-manager-header">
                <h2 data-i18n="theme.themes">Themes</h2>
                <div class="window-controls">
                    <button id="pin-theme-manager" class="pin-btn icon-only-btn" title="Dock to RightSide" aria-label="Dock to right side">
                        <span class="icon-svg" aria-hidden="true">
                            <svg viewBox="0 0 24 24">
                                <path d="M8.5 4h7l-1.5 4.8v3.1l1.4 1.5h-6.8l1.4-1.5V8.8L8.5 4Z"></path>
                                <path d="M12 13.4V20"></path>
                            </svg>
                        </span>
                    </button>
                    <button id="close-theme-manager" class="close-btn">&times;</button>
                </div>
            </div>
            
            <div class="theme-manager-body">
                <div class="theme-manager-tabs">
                    <button class="tab-btn active" data-tab="local" data-i18n="theme.customThemes">My Themes</button>
                    <button class="tab-btn" data-tab="marketplace" data-i18n="theme.marketplace">Marketplace</button>
                </div>

                <div id="local-themes-view" class="tab-content active">
                    <!-- Global Theme Settings -->
                    <div class="theme-manager-section global-settings">
                        <h3 data-i18n="theme.globalOptions">Global Options</h3>
                        <div class="settings-grid settings-grid--global">
                            <div class="form-group">
                                <label for="global-corner-style" data-i18n="theme.cornerStyle">Corner Style:</label>
                                <select id="global-corner-style">
                                    <option value="rounded" data-i18n="theme.cornerStyleOptions.rounded"></option>
                                    <option value="futuristic" data-i18n="theme.cornerStyleOptions.futuristic"></option>
                                    <option value="semi-rounded" data-i18n="theme.cornerStyleOptions.semiRounded"></option>
                                    <option value="sharp" data-i18n="theme.cornerStyleOptions.sharp"></option>
                                </select>
                            </div>
                            <div class="form-group checkbox-group global-override-bg-group">
                                <label for="global-override-background" class="global-override-bg-label">
                                    <input type="checkbox" id="global-override-background">
                                    <span data-i18n="theme.overrideBackground"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="theme-manager-section">
                        <h3 data-i18n="theme.presets">Preset Themes</h3>
                        <div id="preset-themes" class="preset-themes-list"></div>
                    </div>

                    <div class="theme-manager-section">
                        <h3 data-i18n="theme.custom">Custom Themes</h3>
                        <div id="custom-themes" class="custom-themes-list"></div>
                        <button id="create-theme-btn" class="action-btn" data-i18n="theme.createNewTheme">+ Create New Theme</button>
                    </div>

                    <!-- Create/Edit Theme Form -->
                    <div id="theme-form" class="theme-form" style="display: none;">
                        <h3 id="form-title" data-i18n="theme.createTitle">Create New Theme</h3>
                        
                        <div class="form-group">
                            <label for="theme-name" data-i18n="theme.themeName">Theme Name:</label>
                            <input type="text" id="theme-name" placeholder="My Custom Theme" data-i18n-placeholder="theme.myCustomTheme">
                        </div>

                        <div class="theme-editor-mode-switch">
                            <label data-i18n="theme.customizationMode">Customization Mode:</label>
                            <div class="theme-mode-toggle" role="tablist" aria-label="Theme customization mode" data-i18n-aria-label="theme.customizationModeAria">
                                <button type="button" id="theme-mode-basic-btn" class="theme-mode-btn active" data-theme-mode="basic" aria-selected="true" data-i18n="theme.basicCustomize">Basic Customize</button>
                                <button type="button" id="theme-mode-extended-btn" class="theme-mode-btn" data-theme-mode="extended" aria-selected="false" data-i18n="theme.extendedCustomization">Extended Customization</button>
                            </div>
                            <p class="theme-mode-help" data-i18n="theme.modeHelp">Basic mode auto-generates the full palette from one base color. Switch to Extended to fine-tune every color.</p>
                        </div>

                        <div class="theme-basic-panel">
                            <div class="color-inputs theme-basic-inputs">
                                <div class="form-group">
                                    <label for="theme-base-color">Base Color:</label>
                                    <div class="color-input-group">
                                        <input type="color" id="theme-base-color" class="color-picker">
                                        <input type="text" class="color-text" placeholder="#5AA9FF" readonly>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="theme-basic-variant">Palette Style:</label>
                                    <select id="theme-basic-variant">
                                        <option value="auto">Auto</option>
                                        <option value="dark">Dark UI</option>
                                        <option value="light">Light UI</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="theme-basic-intensity">Intensity:</label>
                                    <div class="gradient-angle-control">
                                        <input type="range" id="theme-basic-intensity" min="60" max="140" step="1" value="100" />
                                        <span id="theme-basic-intensity-value">100%</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="theme-brand-panel">
                            <h4>Logo Brand Color</h4>
                            <label class="bg-layer-checkbox theme-brand-enable" for="theme-basic-brand-use-accent">
                                <input type="checkbox" id="theme-basic-brand-use-accent" checked>
                                <span>Change Logo Span Color?</span>
                            </label>
                            <div class="theme-brand-options">
                                <label class="theme-brand-option">
                                    <input type="radio" name="theme-basic-brand-mode" id="theme-basic-brand-mode-accent" value="accent">
                                    <span>Use Accent Color</span>
                                </label>
                                <label class="theme-brand-option">
                                    <input type="radio" name="theme-basic-brand-mode" id="theme-basic-brand-mode-darker" value="darker" checked>
                                    <span>Darker Accent</span>
                                </label>
                                <label class="theme-brand-option">
                                    <input type="radio" name="theme-basic-brand-mode" id="theme-basic-brand-mode-lighter" value="lighter">
                                    <span>Brighter Accent</span>
                                </label>
                                <div class="theme-brand-strength-row">
                                    <input type="range" id="theme-basic-brand-strength" min="0" max="80" step="1" value="30" />
                                    <span id="theme-basic-brand-strength-value">30%</span>
                                </div>
                                <label class="theme-brand-option">
                                    <input type="radio" name="theme-basic-brand-mode" id="theme-basic-brand-mode-custom" value="custom">
                                    <span>Custom Color</span>
                                </label>
                                <div class="theme-brand-custom-color-row">
                                    <div class="color-input-group">
                                        <input type="color" id="theme-basic-brand-color" class="color-picker" value="#2f9ec0">
                                        <input type="text" class="color-text" placeholder="#2f9ec0" readonly>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="theme-textfx-panel">
                            <h4>Text Animation</h4>
                            <label class="bg-layer-checkbox theme-textfx-enable" for="theme-textfx-enabled">
                                <input type="checkbox" id="theme-textfx-enabled">
                                <span>Enable logo text animation</span>
                            </label>
                            <label class="bg-layer-checkbox theme-textfx-enable" for="theme-textfx-apply-logo">
                                <input type="checkbox" id="theme-textfx-apply-logo">
                                <span>Also apply effect to logo icon</span>
                            </label>
                            <div class="theme-textfx-grid">
                                <div class="form-group">
                                    <label for="theme-textfx-mode">Animation Style:</label>
                                    <select id="theme-textfx-mode">
                                        <option value="flowy-blood">Flowy Blood</option>
                                        <option value="burning">Burning Red/Orange</option>
                                        <option value="water">Water</option>
                                        <option value="slimey-green">Slimey Green</option>
                                        <option value="custom">Custom</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="theme-textfx-speed">Animation Speed:</label>
                                    <div class="gradient-angle-control">
                                        <input type="range" id="theme-textfx-speed" min="2" max="20" step="1" value="7" />
                                        <span id="theme-textfx-speed-value">7s</span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="theme-textfx-intensity">Animation Intensity:</label>
                                    <div class="gradient-angle-control">
                                        <input type="range" id="theme-textfx-intensity" min="0" max="100" step="1" value="72" />
                                        <span id="theme-textfx-intensity-value">72%</span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="theme-textfx-angle">Custom Angle:</label>
                                    <div class="gradient-angle-control">
                                        <input type="range" id="theme-textfx-angle" min="0" max="360" step="1" value="140" />
                                        <span id="theme-textfx-angle-value">140deg</span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Custom Colors:</label>
                                    <label class="bg-layer-checkbox" for="theme-textfx-use-color-4">
                                        <input type="checkbox" id="theme-textfx-use-color-4">
                                        <span>Use 4th color stop</span>
                                    </label>
                                    <div class="theme-textfx-custom-colors">
                                        <div class="color-input-group">
                                            <input type="color" id="theme-textfx-color-1" class="color-picker" value="#66d8ff">
                                            <input type="text" class="color-text" placeholder="#66D8FF" readonly>
                                        </div>
                                        <div class="color-input-group">
                                            <input type="color" id="theme-textfx-color-2" class="color-picker" value="#2f7dff">
                                            <input type="text" class="color-text" placeholder="#2F7DFF" readonly>
                                        </div>
                                        <div class="color-input-group">
                                            <input type="color" id="theme-textfx-color-3" class="color-picker" value="#14306a">
                                            <input type="text" class="color-text" placeholder="#14306A" readonly>
                                        </div>
                                        <div class="color-input-group">
                                            <input type="color" id="theme-textfx-color-4" class="color-picker" value="#0d1742">
                                            <input type="text" class="color-text" placeholder="#0D1742" readonly>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <p class="theme-textfx-note">Applied to logo text, and optionally to the logo icon.</p>
                        </div>

                        <div class="theme-llm-panel">
                            <h4>Change Theme With LLM</h4>
                            <p class="theme-llm-note">Generate a full palette from mood + style guidance using your configured AI provider.</p>
                            <div class="theme-llm-grid">
                                <div class="theme-input-group">
                                    <label for="theme-llm-mood">Mood:</label>
                                    <select id="theme-llm-mood">
                                        <option value="balanced">Balanced</option>
                                        <option value="cozy">Cozy</option>
                                        <option value="epic">Epic</option>
                                        <option value="mysterious">Mysterious</option>
                                        <option value="playful">Playful</option>
                                        <option value="dark">Dark</option>
                                        <option value="high-energy">High Energy</option>
                                    </select>
                                </div>
                                <div class="theme-input-group">
                                    <label for="theme-llm-style">Style:</label>
                                    <select id="theme-llm-style">
                                        <option value="arcade">Arcade</option>
                                        <option value="retro">Retro</option>
                                        <option value="cyberpunk">Cyberpunk</option>
                                        <option value="fantasy">Fantasy</option>
                                        <option value="nature">Nature</option>
                                        <option value="minimal">Minimal</option>
                                        <option value="horror">Horror</option>
                                    </select>
                                </div>
                                <div class="theme-input-group">
                                    <label for="theme-llm-energy">Energy:</label>
                                    <div class="gradient-angle-control">
                                        <input type="range" id="theme-llm-energy" min="0" max="100" step="1" value="60" />
                                        <span id="theme-llm-energy-value">60%</span>
                                    </div>
                                </div>
                                <div class="theme-input-group">
                                    <label for="theme-llm-saturation">Saturation:</label>
                                    <div class="gradient-angle-control">
                                        <input type="range" id="theme-llm-saturation" min="0" max="100" step="1" value="65" />
                                        <span id="theme-llm-saturation-value">65%</span>
                                    </div>
                                </div>
                            </div>
                            <div class="theme-input-group">
                                <label for="theme-llm-notes">Extra Notes:</label>
                                <textarea id="theme-llm-notes" rows="2" placeholder="Optional: neon greens, avoid pure black, emphasize readability"></textarea>
                            </div>
                            <div class="theme-input-group">
                                <label for="theme-llm-prompt">Custom Prompt Add-on:</label>
                                <textarea id="theme-llm-prompt" rows="3" placeholder="Optional: additional prompt instructions for the LLM"></textarea>
                            </div>
                            <div class="theme-llm-toggles">
                                <label class="bg-layer-checkbox" for="theme-llm-prefer-textfx">
                                    <input type="checkbox" id="theme-llm-prefer-textfx" checked>
                                    <span>Prefer logo text effect</span>
                                </label>
                                <label class="bg-layer-checkbox" for="theme-llm-apply-logo">
                                    <input type="checkbox" id="theme-llm-apply-logo" checked>
                                    <span>Apply effect to logo icon</span>
                                </label>
                            </div>
                            <div class="theme-llm-actions">
                                <button id="theme-llm-generate-btn" type="button" class="action-btn">Generate + Apply</button>
                                <span id="theme-llm-status" class="theme-llm-status" aria-live="polite"></span>
                            </div>
                        </div>

                        <div class="theme-font-panel">
                            <h4>Fonts</h4>
                            <div class="theme-textfx-grid">
                                <div class="form-group">
                                    <label for="theme-font-body-preset">Primary Font:</label>
                                    <select id="theme-font-body-preset">
                                        <option value="quicksand">Quicksand</option>
                                        <option value="montserrat">Montserrat</option>
                                        <option value="luckiest">Luckiest Guy</option>
                                        <option value="gameboy">Press Start 2P</option>
                                        <option value="custom">Custom</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="theme-font-heading-preset">Secondary/Game Name Font:</label>
                                    <select id="theme-font-heading-preset">
                                        <option value="quicksand">Quicksand</option>
                                        <option value="montserrat">Montserrat</option>
                                        <option value="luckiest">Luckiest Guy</option>
                                        <option value="gameboy">Press Start 2P</option>
                                        <option value="custom">Custom</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="theme-font-body-custom">Primary Custom Stack:</label>
                                    <input type="text" id="theme-font-body-custom" placeholder="'Quicksand', 'Segoe UI', sans-serif" />
                                </div>
                                <div class="form-group">
                                    <label for="theme-font-heading-custom">Secondary Custom Stack:</label>
                                    <input type="text" id="theme-font-heading-custom" placeholder="'Luckiest Guy', 'Montserrat', sans-serif" />
                                </div>
                                <label class="bg-layer-checkbox theme-textfx-enable" for="theme-font-pixel-mode">
                                    <input type="checkbox" id="theme-font-pixel-mode">
                                    <span>Enable pixel text mode</span>
                                </label>
                            </div>
                        </div>

                        <div class="theme-extended-panel">
                        <div class="color-inputs">
                            <div class="form-group">
                                <label for="color-bg-primary">Primary Background:</label>
                                <div class="color-input-group">
                                    <input type="color" id="color-bg-primary" class="color-picker">
                                    <input type="text" class="color-text" placeholder="#000000" readonly>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="color-text-primary">Primary Text:</label>
                                <div class="color-input-group">
                                    <input type="color" id="color-text-primary" class="color-picker">
                                    <input type="text" class="color-text" placeholder="#ffffff" readonly>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="color-text-secondary">Secondary Text:</label>
                                <div class="color-input-group">
                                    <input type="color" id="color-text-secondary" class="color-picker">
                                    <input type="text" class="color-text" placeholder="#ffffff" readonly>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="color-accent">Accent Color:</label>
                                <div class="color-input-group">
                                    <input type="color" id="color-accent" class="color-picker">
                                    <input type="text" class="color-text" placeholder="#66ccff" readonly>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="color-bg-secondary">Secondary Background:</label>
                                <div class="color-input-group">
                                    <input type="color" id="color-bg-secondary" class="color-picker">
                                    <input type="text" class="color-text" placeholder="#1a1a1a" readonly>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="color-bg-header">Header Background:</label>
                                <div class="color-input-group">
                                    <input type="color" id="color-bg-header" class="color-picker">
                                    <input type="text" class="color-text" placeholder="#2d2d2d" readonly>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="color-bg-sidebar">Sidebar Background:</label>
                                <div class="color-input-group">
                                    <input type="color" id="color-bg-sidebar" class="color-picker">
                                    <input type="text" class="color-text" placeholder="#333333" readonly>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="color-bg-actionbar">Action Bar Background:</label>
                                <div class="color-input-group">
                                    <input type="color" id="color-bg-actionbar" class="color-picker">
                                    <input type="text" class="color-text" placeholder="#252525" readonly>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="color-border">Border Color:</label>
                                <div class="color-input-group">
                                    <input type="color" id="color-border" class="color-picker">
                                    <input type="text" class="color-text" placeholder="#333333" readonly>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="color-bg-tertiary">Tertiary Background:</label>
                                <div class="color-input-group">
                                    <input type="color" id="color-bg-tertiary" class="color-picker">
                                    <input type="text" class="color-text" placeholder="#333333" readonly>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="color-bg-quaternary">Quaternary Background:</label>
                                <div class="color-input-group">
                                    <input type="color" id="color-bg-quaternary" class="color-picker">
                                    <input type="text" class="color-text" placeholder="#2B2B2B" readonly>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="color-success">Success Color:</label>
                                <div class="color-input-group">
                                    <input type="color" id="color-success" class="color-picker">
                                    <input type="text" class="color-text" placeholder="#4caf50" readonly>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="color-danger">Danger Color:</label>
                                <div class="color-input-group">
                                    <input type="color" id="color-danger" class="color-picker">
                                    <input type="text" class="color-text" placeholder="#f44336" readonly>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="color-text-tertiary">Tertiary Text:</label>
                                <div class="color-input-group">
                                    <input type="color" id="color-text-tertiary" class="color-picker">
                                    <input type="text" class="color-text" placeholder="#8fa2bf" readonly>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="color-warning">Warning Color:</label>
                                <div class="color-input-group">
                                    <input type="color" id="color-warning" class="color-picker">
                                    <input type="text" class="color-text" placeholder="#ffcc00" readonly>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="color-brand">Brand Color:</label>
                                <div class="color-input-group">
                                    <input type="color" id="color-brand" class="color-picker">
                                    <input type="text" class="color-text" placeholder="#2f9ec0" readonly>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="color-accent-hover">Accent Hover:</label>
                                <div class="color-input-group">
                                    <input type="color" id="color-accent-hover" class="color-picker">
                                    <input type="text" class="color-text" placeholder="#2aa7cc" readonly>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="color-glass-surface">Glass Surface:</label>
                                <div class="color-input-group">
                                    <input type="color" id="color-glass-surface" class="color-picker">
                                    <input type="text" class="color-text" placeholder="#11213a" readonly>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="color-glass-surface-strong">Glass Surface Strong:</label>
                                <div class="color-input-group">
                                    <input type="color" id="color-glass-surface-strong" class="color-picker">
                                    <input type="text" class="color-text" placeholder="#102037" readonly>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="color-glass-border">Glass Border:</label>
                                <div class="color-input-group">
                                    <input type="color" id="color-glass-border" class="color-picker">
                                    <input type="text" class="color-text" placeholder="#4f6380" readonly>
                                </div>
                            </div>
                        </div>

                        <div class="theme-gradient-section">
                            <h4>App Gradient</h4>
                            <div class="color-inputs">
                                <div class="form-group">
                                    <label for="color-app-gradient-a">Gradient Color A:</label>
                                    <div class="color-input-group">
                                        <input type="color" id="color-app-gradient-a" class="color-picker">
                                        <input type="text" class="color-text" placeholder="#0b1528" readonly>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="color-app-gradient-b">Gradient Color B:</label>
                                    <div class="color-input-group">
                                        <input type="color" id="color-app-gradient-b" class="color-picker">
                                        <input type="text" class="color-text" placeholder="#0f2236" readonly>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="color-app-gradient-c">Gradient Color C:</label>
                                    <div class="color-input-group">
                                        <input type="color" id="color-app-gradient-c" class="color-picker">
                                        <input type="text" class="color-text" placeholder="#1d2f4a" readonly>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group gradient-angle-group">
                                <label for="gradient-angle">Gradient Angle:</label>
                                <div class="gradient-angle-control">
                                    <input type="range" id="gradient-angle" min="0" max="360" step="1" value="160" />
                                    <span id="gradient-angle-value">160deg</span>
                                </div>
                            </div>
                        </div>
                        </div>

                        <!-- Background Image Section -->
                        <!-- Style Options -->

                        <div class="background-section">
                            <h4 data-i18n="theme.backgroundImage">Background Image</h4>
                            
                            <div class="form-group">
                                <label for="bg-image-input" data-i18n="theme.uploadImage">Upload Image:</label>
                                <input type="file" id="bg-image-input" accept="image/*">
                                <span id="bg-image-name" class="image-name"></span>
                                <button type="button" id="clear-bg-image-btn" class="action-btn remove-btn" style="display: none;" data-i18n="theme.clearImage">Clear Image</button>
                            </div>

                            <div class="form-group">
                                <label for="bg-top-image-input">Top Banner Image / GIF:</label>
                                <input type="file" id="bg-top-image-input" accept="image/*">
                                <span id="bg-top-image-name" class="image-name"></span>
                                <button type="button" id="clear-bg-top-image-btn" class="action-btn remove-btn" style="display: none;">Clear Top Banner</button>
                            </div>

                            <div class="form-group">
                                <label for="bg-title-image-input">Top Title Bar Image:</label>
                                <input type="file" id="bg-title-image-input" accept="image/*">
                                <span id="bg-title-image-name" class="image-name"></span>
                                <button type="button" id="clear-bg-title-image-btn" class="action-btn remove-btn" style="display: none;">Clear Title Bar Image</button>
                            </div>

                            <div class="form-group">
                                <label for="bg-target-select">Edit Surface:</label>
                                <select id="bg-target-select">
                                    <option value="base">Background</option>
                                    <option value="top">Top Banner</option>
                                    <option value="title">Top Title Bar</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label id="bg-position-label" for="bg-position" data-i18n="theme.position">Position:</label>
                                <select id="bg-position"></select>
                            </div>

                            <div class="form-group">
                                <label id="bg-repeat-label" for="bg-background-repeat">Repeat:</label>
                                <select id="bg-background-repeat"></select>
                            </div>

                            <div class="form-group">
                                <label id="bg-scale-label" for="bg-scale" data-i18n="theme.scaleMode">Scale Mode:</label>
                                <select id="bg-scale"></select>
                            </div>

                            <div class="bg-offset-controls">
                                <div class="form-group">
                                    <label for="bg-offset-x">Offset X (px):</label>
                                    <input type="number" id="bg-offset-x" step="1" value="0">
                                </div>
                                <div class="form-group">
                                    <label for="bg-offset-y">Offset Y (px):</label>
                                    <input type="number" id="bg-offset-y" step="1" value="0">
                                </div>
                            </div>

                            <div id="bg-preview" class="bg-preview" style="display: none;">
                                <img id="bg-preview-img" src="" alt="Background preview">
                            </div>
                            <div id="bg-top-preview" class="bg-preview" style="display: none;">
                                <img id="bg-top-preview-img" src="" alt="Top banner preview">
                            </div>
                            <div id="bg-title-preview" class="bg-preview" style="display: none;">
                                <img id="bg-title-preview-img" src="" alt="Top title bar preview">
                            </div>

                            <div class="bg-layers-section">
                                <div class="bg-layers-header-row">
                                    <h5>Extra Image Layers</h5>
                                    <button type="button" id="add-bg-layer-btn" class="action-btn small">+ Add Layer</button>
                                </div>
                                <p class="bg-layers-help">
                                    Add as many overlay images as you want and set position, scale, repeat, behavior, blend mode, and opacity for each.
                                </p>
                                <div id="bg-layer-list" class="bg-layer-list"></div>
                            </div>
                        </div>

                        <!-- Card Effects Section -->
                        <div class="card-effects-section">
                            <h4 data-i18n="theme.cardEffects">Card Effects</h4>
                            
                            <div class="form-group checkbox-group">
                                <label for="glass-effect-toggle">
                                    <input type="checkbox" id="glass-effect-toggle" checked>
                                    <span data-i18n="theme.enableGlassEffect">Enable Glass Morphism Effect</span>
                                </label>
                                <p class="checkbox-description" data-i18n="theme.glassEffectDesc">Apply frosted glass effect to game cards</p>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button id="reset-theme-defaults" class="action-btn" data-i18n="theme.resetDefaults">Reset Defaults</button>
                            <button id="save-theme-btn" class="action-btn launch-btn" data-i18n="theme.saveTheme">Save Theme</button>
                            <button id="cancel-theme-btn" class="action-btn remove-btn" data-i18n="theme.cancel">Cancel</button>
                        </div>
                    </div>
                </div>

                <div id="marketplace-view" class="tab-content" style="display: none;">
                    <div class="theme-manager-section">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <h3 style="margin: 0;" data-i18n="theme.communityWorkshop">Community Workshop</h3>
                            <button id="refresh-themes-btn" class="action-btn small btn-with-icon" title="Refresh Themes" aria-label="Refresh Themes">
                                <span class="icon-svg" aria-hidden="true">
                                    <svg viewBox="0 0 24 24">
                                        <path d="M20 11a8 8 0 1 0 2.2 5.5"></path>
                                        <path d="M20 4v7h-7"></path>
                                    </svg>
                                </span>
                                <span data-i18n="theme.refresh">Refresh</span>
                            </button>
                        </div>
                        <div id="marketplace-list" class="marketplace-grid">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Webhook Input Modal -->
    <div id="webhook-modal" class="modal glass" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 2000; align-items: center; justify-content: center;">
        <div class="modal-content" style="background: var(--bg-secondary); padding: 20px; border-radius: 8px; width: 400px; max-width: 90%; box-shadow: 0 4px 6px rgba(0,0,0,0.1); border: 1px solid var(--border-color);">
            <h3 style="margin-top: 0;" data-i18n="webhook.title">Enter Discord Webhook URL</h3>
            <p style="color: var(--text-secondary); margin-bottom: 15px;">
                <span data-i18n="webhook.description">To upload themes, please provide a valid Discord Webhook URL. This will be saved locally.</span>
                <br>
                <a href="https://discord.gg/EtKvZ2F" target="_blank" style="color: var(--accent-color); text-decoration: none; font-size: 0.9em; margin-top: 5px; display: inline-block;" data-i18n="webhook.getIt">No webhook yet? Get it in the Discord</a>
            </p>
            <input type="text" id="webhook-input" placeholder="https://discord.com/api/webhooks/..." style="width: 100%; padding: 8px; margin-bottom: 15px; background: var(--bg-tertiary); border: 1px solid var(--border-color); color: var(--text-primary); border-radius: 4px;">
            <div style="display: flex; justify-content: flex-end; gap: 10px;">
                <button id="webhook-cancel-btn" class="action-btn remove-btn" data-i18n="buttons.cancel">Cancel</button>
                <button id="webhook-save-btn" class="action-btn launch-btn" data-i18n="buttons.saveAndContinue">Save & Continue</button>
            </div>
        </div>
    </div>

    <!-- Language Manager Modal -->
    <div id="language-manager-modal" class="theme-manager-modal glass" style="display: none;">
        <div class="theme-manager-content">
            <div id="language-manager-header" class="theme-manager-header">
                <h2 data-i18n="language.managerTitle">Language Manager</h2>
                <div class="window-controls">
                    <button id="pin-language-manager" class="pin-btn icon-only-btn" title="Dock to RightSide" aria-label="Dock to right side">
                        <span class="icon-svg" aria-hidden="true">
                            <svg viewBox="0 0 24 24">
                                <path d="M8.5 4h7l-1.5 4.8v3.1l1.4 1.5h-6.8l1.4-1.5V8.8L8.5 4Z"></path>
                                <path d="M12 13.4V20"></path>
                            </svg>
                        </span>
                    </button>
                    <button id="close-language-manager" class="close-btn">&times;</button>
                </div>
            </div>
            
            <div class="theme-manager-body">
                <div class="theme-manager-tabs">
                    <button class="tab-btn active" data-tab="lang-list" data-i18n="language.tabs.languages">Languages</button>
                    <button class="tab-btn" data-tab="lang-edit" style="display:none" data-i18n="language.tabs.editor">Editor</button>
                </div>

                <div id="lang-list-view" class="tab-content active">
                    <div class="theme-manager-section">
                        <h3 data-i18n="language.installed">Installed Languages</h3>
                        <div id="language-list" class="language-list">
                            <!-- Populated dynamically -->
                        </div>
                        <div class="lang-list-actions">
                            <button id="add-language-btn" class="action-btn" data-i18n="language.addNew">+ Add New Language</button>
                            <button id="download-languages-btn" class="action-btn small" type="button" data-i18n="language.downloadFromRepo">Download from Repo</button>
                            <button id="export-all-languages-btn" class="action-btn small" type="button" data-i18n="language.exportAllJson">Export All as JSON</button>
                        </div>
                    </div>
                </div>

                <div id="lang-edit-view" class="tab-content" style="display: none;">
                     <div class="manager-section">
                        <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 15px; flex-shrink: 0;">
                            <button id="back-to-lang-list" class="action-btn small btn-with-icon" aria-label="Back" data-i18n-aria-label="buttons.back">
                                <span class="icon-svg" aria-hidden="true">
                                    <svg viewBox="0 0 24 24">
                                        <path d="M15 18 9 12l6-6"></path>
                                    </svg>
                                </span>
                                <span data-i18n="buttons.back">Back</span>
                            </button>
                            <h3 id="editing-lang-name" style="margin: 0;">Editing English</h3>
                        </div>

                        <div class="lang-editor-toolbar">
                            <label id="lang-live-edit-toggle-wrap" class="lang-live-edit-toggle" title="Enable direct UI label editing" data-i18n-title="language.liveEditHint">
                                <input type="checkbox" id="lang-live-edit-toggle" />
                                <span data-i18n="language.liveEdit">Live Edit</span>
                            </label>

                            <label class="lang-translate-mode" for="lang-translate-llm-mode">
                                <span data-i18n="language.translateLlmModeLabel">Translate mode</span>
                                <select id="lang-translate-llm-mode" class="lang-translate-mode-select">
                                    <option value="all-in-one-json" data-i18n="language.translateLlmModeAllInOneJson">All in one JSON</option>
                                    <option value="one-by-one" data-i18n="language.translateLlmModeOneByOne">One by one</option>
                                </select>
                            </label>

                            <label class="lang-live-edit-toggle">
                                <input type="checkbox" id="lang-translate-llm-retranslate-existing" />
                                <span data-i18n="language.translateLlmRetranslateExisting">Retranslate existing</span>
                            </label>

                            <label class="lang-translate-guidance" for="lang-translate-llm-style-hint">
                                <span>Translation style</span>
                                <input
                                    type="text"
                                    id="lang-translate-llm-style-hint"
                                    placeholder="e.g. English but more casual and compact"
                                />
                            </label>

                            <button id="lang-translate-llm-btn" class="action-btn small" type="button" data-i18n="language.translateWithLlm">Translate with LLM</button>
                            <span id="lang-translate-llm-status" class="lang-llm-translate-status" aria-live="polite"></span>

                            <div class="search-bar">
                                <input type="text" id="lang-search-keys" placeholder="Search keys or values..." data-i18n-placeholder="language.searchPlaceholder">
                            </div>
                        </div>

                        <div id="lang-keys-list" class="lang-keys-list">
                            <!-- Key-Value pairs -->
                        </div>
                        
                        <div class="form-actions">
                             <button id="export-current-lang-btn" class="action-btn small" type="button" data-i18n="language.exportJson">Export JSON</button>
                             <button id="save-lang-btn" class="action-btn launch-btn" data-i18n="buttons.saveChanges">Save Changes</button>
                        </div>
                     </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Info Modal -->
    <div id="game-info-modal" class="theme-manager-modal game-info-popup glass" style="display: none;">
        <div class="theme-manager-content">
            <div id="game-info-header" class="theme-manager-header">
                <h2 id="game-info-popup-title">Game Details</h2>
                <div class="window-controls">
                    <button id="pin-game-info" class="pin-btn icon-only-btn" title="Dock to RightSide" aria-label="Dock to right side">
                        <span class="icon-svg" aria-hidden="true">
                            <svg viewBox="0 0 24 24">
                                <path d="M8.5 4h7l-1.5 4.8v3.1l1.4 1.5h-6.8l1.4-1.5V8.8L8.5 4Z"></path>
                                <path d="M12 13.4V20"></path>
                            </svg>
                        </span>
                    </button>
                    <button id="close-game-info" class="close-btn">&times;</button>
                </div>
            </div>
            <div id="game-info-popup-body" class="theme-manager-body game-info-popup-body"></div>
        </div>
    </div>

    <!-- Emulator Info Modal -->
    <div id="emulator-info-modal" class="theme-manager-modal emulator-info-popup glass" style="display: none;">
        <div class="theme-manager-content">
            <div id="emulator-info-header" class="theme-manager-header">
                <h2 id="emulator-info-popup-title">Emulator Details</h2>
                <div class="window-controls">
                    <button id="pin-emulator-info" class="pin-btn icon-only-btn" title="Dock to RightSide" aria-label="Dock to right side">
                        <span class="icon-svg" aria-hidden="true">
                            <svg viewBox="0 0 24 24">
                                <path d="M8.5 4h7l-1.5 4.8v3.1l1.4 1.5h-6.8l1.4-1.5V8.8L8.5 4Z"></path>
                                <path d="M12 13.4V20"></path>
                            </svg>
                        </span>
                    </button>
                    <button id="close-emulator-info" class="close-btn">&times;</button>
                </div>
            </div>
            <div id="emulator-info-popup-body" class="theme-manager-body emulator-info-popup-body"></div>
        </div>
    </div>

    <script src="./i18n.js"></script>
    <script src="dist/renderer.bundle.js"></script>
</body>
</html>
