@mixin glass-frost($blur: 12px) {
    backdrop-filter: blur($blur);
    -webkit-backdrop-filter: blur($blur);
}

// Full glass surface (keeps its own border/shadow).
@mixin glass-base($blur: 12px) {
    @include glass-frost($blur);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
}

// Background-only frosted glass. Use for components that already define their own
// border/shadow/glow (e.g. game cards).
@mixin glass-bg-only($color-var, $transparency, $blur: 12px) {
    @include glass-frost($blur);
    background: color-mix(in srgb, var($color-var), transparent $transparency) !important;
}

@mixin glass-bg($color-var, $transparency) {
    @include glass-base();
    background: color-mix(in srgb, var($color-var), transparent $transparency) !important;
}

/* Glass Effect Trigger */
/* When data-glass-effect="enabled" is on the <html> tag, change the cards */
[data-glass-effect=enabled] {
    .game-card,
    .list-item,
    .games-table,
    .slideshow-card,
    .random-display,
    .tools-overview .tool-card,
    .emulator-card,
    .emulator-list-item,
    .emulators-table {
        /* Increased transparency from 30% to 50% */
        @include glass-bg-only(--bg-secondary, 50%);
    }

    .game-card:hover,
    .tools-overview .tool-card:hover,
    .emulator-card:hover,
    .slideshow-card:hover {
        /* Increased transparency from 15% to 30% on hover */
        background: color-mix(in srgb, var(--bg-secondary), transparent 30%) !important;
        border-color: color-mix(in srgb, var(--accent-color), rgba(255, 255, 255, 0.2) 45%);
    }

    .game-card:hover {
        transform: translateY(-5px);
    }

    .slideshow-card:hover {
        box-shadow:
            0 26px 52px rgba(0,0,0,0.6),
            0 0 0 1px color-mix(in srgb, var(--accent-color) 55%, transparent),
            0 0 38px color-mix(in srgb, var(--accent-color) 26%, transparent),
            0 0 0 1px rgba(255,255,255,0.08) inset;
    }

    .list-item:hover {
        background: color-mix(in srgb, var(--bg-secondary), transparent 30%) !important;
        transform: translateX(5px);
    }

    .games-table th {
        background-color: rgba(0, 0, 0, 0.2) !important;
    }

    .emulators-table th {
        background-color: rgba(0, 0, 0, 0.2) !important;
    }

    .glass {
        /* Increased transparency from 10% to 25% */
        @include glass-bg(--bg-primary, 25%);
    }

    /* Apply Glass Effect to Theme Manager Inputs when enabled */
    .color-input-group,
    .theme-item {
        @include glass-base(10px);
        /* Increased transparency from 40% to 60% */
        background: color-mix(in srgb, var(--bg-secondary), transparent 60%) !important;
        border: 1px solid rgba(255, 255, 255, 0.1) !important;
    }
}

/* 4. Other Glass Elements (Inputs/Dropdowns) */
/* These can keep the .glass-input class since they are always glass */
.glass-input, .glass-dropdown {
    background: rgba(255, 255, 255, 0.05);
    @include glass-base(10px);
    border-radius: 8px;
    color: white;
}
